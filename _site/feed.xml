<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<meta name="viewport" content="width=device-width">

		<!--[if lt IE 9]>
		<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->

		<link href="/assets/css/style.css" rel="stylesheet" />
		<link href="/assets/css/colors-dark.css" rel="stylesheet" />
	</head>

	<body>
		<header id="header">
			<h1><a href="/"><i class="icon-sun"></i> Mike Hoffert</a></h1>
			<p>Personal information for Michael Hoffert with work experience.</p>
		</header>

		<div id="page">
			<div id="sidebar">
				<nav>
					<ul>
						<li><a href="/">Home</a></li>
						<li><a href="/game">Game</a></li>
						<li><a href="/about">About</a></li>
						<li><a href="http://github.com/mahcloud" target="_blank">GitHub</a></li>
						<li><a href="http://twitter.com/mahcloud" target="_blank">Twitter</a></li>
						<li><a href="http://facebook.com/ff7heaven" target="_blank">Facebook</a></li>
						<li><a href="/feed.xml">RSS Feed</a></li>
					</ul>
				</nav>
			</div>

			<div id="content">
				<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
	<channel>
		<title>Mike Hoffert</title>
		<description>Personal information for Michael Hoffert with work experience.</description>
		<link>http://www.mikehoffert.com</link>
		<atom:link href="http://www.mikehoffert.com/feed.xml" rel="self" type="application/rss+xml" />
		
			<item>
				<title>Single Table Inheritance for legacy databases</title>
				<description>&lt;p&gt;Single table inheritance is a pretty common practice among rails developers. It allows the developer to seperate a single object into seperate concepts while keeping the data consistently the same. For example you could seperate the logic between an admin and a customer, but the data for these two types of users is simply the same. The problem is that rails defaults this distinction into a database column named &lt;code&gt;type&lt;/code&gt; and stores the data as a string of the class name. Well, my legacy PHP framework stored it in a database column named &lt;code&gt;typeID&lt;/code&gt; with the data as a single character representation of the class name.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;inheritance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_column&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:typeID&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;This tells the user model to use the &lt;code&gt;typeID&lt;/code&gt; column as the single table inheritance base.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;no&quot;&gt;ADMIN&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_TYPE&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;A&amp;#39;&lt;/span&gt;
  &lt;span class=&quot;no&quot;&gt;CLIENT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_USER&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_TYPE&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;C&amp;#39;&lt;/span&gt;
  &lt;span class=&quot;no&quot;&gt;SUPER&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_ADMIN&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_TYPE&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;S&amp;#39;&lt;/span&gt;

  &lt;span class=&quot;no&quot;&gt;TYPES&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_MAP&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;ADMIN_TYPE&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;User&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Admin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;CLIENT_USER_TYPE&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;User&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;ClientUser&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;SUPER_ADMIN_TYPE&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;User&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;SuperAdmin&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;find&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_sti&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_class&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;TYPES_MAP&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;or&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;super&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;sti&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_name&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;TYPES_MAP&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;invert&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;This tells the user model what the single characters map to what classes in the rails framework.&lt;/p&gt;

&lt;p&gt;The only hicup I ran into was that instantiating and storing the subclass would think it also needed to be aware of subclasses. So, I added the following to all the subclasses.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;inheritance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_column&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:\&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_type&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_disabled&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;a href=&quot;https://gist.github.com/vamdt/75aca125883a88a9f1fd&quot;&gt;Where I got the idea&lt;/a&gt;&lt;/p&gt;

</description>
				<pubDate>Fri, 04 Sep 2015 03:15:00 -0600</pubDate>
				<link>http://www.mikehoffert.com/2015/09/04/sti/</link>
				<guid isPermaLink="true">http://www.mikehoffert.com/2015/09/04/sti/</guid>
			</item>
		
			<item>
				<title>Ransack</title>
				<description>&lt;h1 id=&quot;dashboard-main-project&quot;&gt;Dashboard: main project&lt;/h1&gt;

&lt;p&gt;This week I had the unique task of building a fully interactive dashboard. A system that not only displays a large amount of analytics from all over the site, but does it in a way that admins can drill into the information and get immediate data updates.&lt;/p&gt;

&lt;p&gt;The first problem is handling all the different types of data on different pages without redundant code. I handled this using &lt;a href=&quot;http://railscasts.com/episodes/99-complex-partials&quot;&gt;Rails partial views&lt;/a&gt; under the dashboard namespace. So, if I wanted a table of user data I would get the app/views/dashboard/users/_table.html.haml parital. I chose to use &lt;a href=&quot;http://railscasts.com/episodes/136-jquery-ajax-revised&quot;&gt;rails remote&lt;/a&gt; forms to handle the AJAX loading.&lt;/p&gt;

&lt;h2 id=&quot;ransack&quot;&gt;Ransack&lt;/h2&gt;

&lt;p&gt;At this point I had a dashboard that I could click into and see that data on another page. The code was clean because it was being reused. The big problem was that based on feedback we needed pages that could be drilled into on the same page too. So, an admin could click on a user and all other dashboard data on that page would reflect objects relating to just that user and so forth for the rest of the dashboard objects. This was a big issue in my mind because it could potentially be a limitless amount of parameters passed back and forth between a huge amount of partials. I found a Ruby Gem that was perfect for this kind of filtering called &lt;a href=&quot;https://github.com/activerecord-hackery/ransack&quot;&gt;Ransack&lt;/a&gt;. There was a great &lt;a href=&quot;http://railscasts.com/episodes/370-ransack&quot;&gt;railscast&lt;/a&gt; episode on ransack, but I found it lacking a lot of answers for my specific problem.&lt;/p&gt;

&lt;p&gt;I’d like to delve into these issues. The first was that my dashboard was working off a legacy MySQL database built under a PHP framework. Ransack works based on single attributes on an object. The users controller action essentially is this simple.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;vi&quot;&gt;@search&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;User&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ransack&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;params&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:q&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;vi&quot;&gt;@users&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@search&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;distinct&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;The ransack call takes the q parameter that stores all the ransack filters. The next obvious question is how does the user interface interact with this. I used three different ways of interacting. I had buttons that would work as toggles to turn on certain filters and turn off other filters. I also had form fields for ‘LIKE’ searches. Last, I had table columns sortable.&lt;/p&gt;

&lt;h3 id=&quot;toggle-links&quot;&gt;Toggle links&lt;/h3&gt;

&lt;p&gt;The toggle links were probably the easiest step. The only real challenge was clearing out the other filters from ransack. I didn’t see anything in their documentation about clearing out other filters, so I accomplished it by simply overwriting the q param in the link.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;link&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_to&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;Toggle Link&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dashboard&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_users&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;q&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_query&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_params&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)),&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;remote&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;The helper method I’m referencing would look something like this.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_query&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_params&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;param1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;param2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;param3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;params&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:q&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;nil?&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)?&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;params&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:q&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;merge&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;filter1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;param1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;filter2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;param2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;filter3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;param3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h3 id=&quot;custom-form-searches&quot;&gt;Custom form searches&lt;/h3&gt;

&lt;p&gt;Ransack has a custom search_form_for method that takes a search object. The [:dashboard, search] references the namespaced @search variable from the users controller. I’m using a custom search here because I’d like to use my own model scope.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;search&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_form&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_for&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:dashboard&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;search&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;remote&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;search&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_field&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:filter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_by&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_name&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;The scope on the model would look something like this.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;scope&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:filter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_by&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;where&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;CONCAT(firstName, &amp;#39; &amp;#39;, lastName) LIKE ?&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;%&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;%&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;ransackable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_scopes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;auth&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_object&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;filter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_by&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;ransackable_scopes defines all scopes that the user could access through ransack. This can be refined by the user roles, but I didn’t need this functionality. Normally custom form searches would reference something like f.search_field :name_cont that would search for users that contain the input text in the name attribute. Ransack has other search terms for equals, less than, etc.&lt;/p&gt;

&lt;h3 id=&quot;column-sorts&quot;&gt;Column sorts&lt;/h3&gt;

&lt;p&gt;Column sorts are very eligant in ransack.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;o&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;th&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sort&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_link&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:dashboard&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;search&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;Name&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;default&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;_order&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:desc&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;remote&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;method&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:get&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;This header has a sort_link on the column name. The first issue here is that Name in the system is actually a function that returns a concatinated field not an attribute. Well, it turns out that ransack has a thing called ransackers that define custom algorithms for this specific situation.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;ransacker&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:name&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;parent&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
  &lt;span class=&quot;no&quot;&gt;Arel&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sql&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;CONCAT(users.firstName, &amp;quot; &amp;quot;, users.lastName)&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Setting a default sort order on the users controller would look something like this.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;vi&quot;&gt;@search&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;User&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ransack&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;params&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:q&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;vi&quot;&gt;@search&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sorts&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;name asc&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@search&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sorts&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;empty?&lt;/span&gt;
&lt;span class=&quot;vi&quot;&gt;@users&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@search&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;distinct&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;I’m setting the defualt sort to name ascending unless another one is set.&lt;/p&gt;

</description>
				<pubDate>Wed, 02 Sep 2015 02:37:00 -0600</pubDate>
				<link>http://www.mikehoffert.com/2015/09/02/ransack/</link>
				<guid isPermaLink="true">http://www.mikehoffert.com/2015/09/02/ransack/</guid>
			</item>
		
			<item>
				<title>Chef - Installing Postgres - Load Balanced Servers</title>
				<description>&lt;p&gt;I want to talk about provisioning a postgres server for a load balanced production rails application. This is probably a topic that everyone will come across. You want a live rails application and it starts becoming a bigger deal, you need to spin up more servers and have them load balanced. Well, in that case, you need one server that has the database and all the other application servers to talk to it. No big deal, right. Well, I’m using chef to provision my servers and I got stuck on a very simple thing. Okay, I provisioned my servers, but how do I get the password for my provisioned server so my application can talk to my database. Seems simple enough, but where is that password.&lt;/p&gt;

&lt;p&gt;The postgres password is stored in the node config file. To access this using chef knife:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;knife edit node SERVER-NAME&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;So simple, but I just didn’t know where it was. I thought I would make note, so no more time is wasted.&lt;/p&gt;

&lt;p&gt;A couple other notes about connecting to a postgres server. After chef provisioning, when I ran cap deployment, I was running into this error:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;rake aborted!
DEBUG &lt;span class=&quot;o&quot;&gt;[]&lt;/span&gt; 	PG::ConnectionBad: could not connect to server: Connection refused
DEBUG &lt;span class=&quot;o&quot;&gt;[]&lt;/span&gt; 		Is the server running on host &lt;span class=&quot;s2&quot;&gt;&amp;quot;IP_ADDRESS&amp;quot;&lt;/span&gt; and accepting
DEBUG &lt;span class=&quot;o&quot;&gt;[]&lt;/span&gt; 		TCP/IP connections on port 5432?&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;So first thoughts turned to, is my server configured to accept tcp/ip connections? What port is my postgres server running on?
I read &lt;a href=&quot;http://www.postgresql.org/message-id/004e01c22c05$18be79b0$05faa8c0@edios&quot;&gt;this article&lt;/a&gt; on tcp/ip configurations with postgres, but when I added &lt;code&gt;tcpip_socket = true&lt;/code&gt;, it ran errors.
I then found &lt;a href=&quot;http://stackoverflow.com/questions/17648677/is-the-server-running-on-host-localhost-1-and-accepting-tcp-ip-connections&quot;&gt;this article&lt;/a&gt; on setting up your postgres server to listen outside of localhost. That seemed to do the trick.&lt;/p&gt;

&lt;p&gt;Naturally, my next thoughts are &lt;code&gt;awesome! this works but can I automate this for next time?&lt;/code&gt;. So I go to the documentation and of course it’s right &lt;a href=&quot;https://github.com/hw-cookbooks/postgresql&quot;&gt;there&lt;/a&gt; in front of me. Adding these 2 lines does the exact same thing as I described above which means I am now fully automated.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;node.default&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;postgresql&amp;#39;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;config&amp;#39;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;listen_addresses&amp;#39;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;*&amp;#39;&lt;/span&gt;
node.default&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;postgresql&amp;#39;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;pg_hba&amp;#39;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[{&lt;/span&gt;:type &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&amp;gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;host&amp;#39;&lt;/span&gt;, :db &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&amp;gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;all&amp;#39;&lt;/span&gt;, :user &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&amp;gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;postgres&amp;#39;&lt;/span&gt;, :addr &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&amp;gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;IPADDRESS/32&amp;#39;&lt;/span&gt;, :method &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&amp;gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;md5&amp;#39;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

</description>
				<pubDate>Thu, 26 Jun 2014 03:31:00 -0600</pubDate>
				<link>http://www.mikehoffert.com/2014/06/26/postgres-load-balance/</link>
				<guid isPermaLink="true">http://www.mikehoffert.com/2014/06/26/postgres-load-balance/</guid>
			</item>
		
			<item>
				<title>Chef - Installing Postgres - No Make file</title>
				<description>&lt;p&gt;I had to reformat my mac because of a bad installation of virtual box.
I’m now using Vagrant 1.5.4 and VirtualBox 4.3.6
I’m just working through all the little bug nuances. Here’s one of them I thought I would mention.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;2014-06-19T13:34:28-05:00&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; WARN: Failed to properly build pg gem. Forcing properly linking and retrying &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;omnibus fix&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
  * execute&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;generate pg gem Makefile&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; action run
    - execute /opt/chef/embedded/bin/ruby extconf.rb

  * execute&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;make pg gem lib&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; action &lt;span class=&quot;nv&quot;&gt;run&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;================================================================================&lt;/span&gt;
Error executing action &lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;run&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt; on resource &lt;span class=&quot;s1&quot;&gt;&amp;#39;execute[make pg gem lib]&amp;#39;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;================================================================================&lt;/span&gt;


Errno::ENOENT
-------------
No such file or directory - make


Cookbook Trace:
---------------
/var/chef/cache/cookbooks/postgresql/recipes/ruby.rb:112:in &lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;rescue in rescue in from_file&lt;span class=&quot;s1&quot;&gt;&amp;#39;&lt;/span&gt;
&lt;span class=&quot;s1&quot;&gt;/var/chef/cache/cookbooks/postgresql/recipes/ruby.rb:63:in `rescue in from_file&amp;#39;&lt;/span&gt;
/var/chef/cache/cookbooks/postgresql/recipes/ruby.rb:24:in &lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;from_file&lt;span class=&quot;s1&quot;&gt;&amp;#39;&lt;/span&gt;
&lt;span class=&quot;s1&quot;&gt;/var/chef/cache/cookbooks/slice/recipes/default.rb:44:in `from_file&amp;#39;&lt;/span&gt;


Resource Declaration:
---------------------
&lt;span class=&quot;c&quot;&gt;# In /var/chef/cache/cookbooks/postgresql/recipes/ruby.rb&lt;/span&gt;

107:     &lt;span class=&quot;nv&quot;&gt;lib_maker&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; execute &lt;span class=&quot;s1&quot;&gt;&amp;#39;make pg gem lib&amp;#39;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
108:       &lt;span class=&quot;nb&quot;&gt;command&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;make&amp;#39;&lt;/span&gt;
109:       cwd ext_dir
110:       action :nothing
111:     end
112:     lib_maker.run_action&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;:run&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;



Compiled Resource:
------------------
&lt;span class=&quot;c&quot;&gt;# Declared in /var/chef/cache/cookbooks/postgresql/recipes/ruby.rb:107:in `rescue in rescue in from_file&amp;#39;&lt;/span&gt;

execute&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;make pg gem lib&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
  action &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;:nothing&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;
  retries 0
  retry_delay 2
  &lt;span class=&quot;nb&quot;&gt;command&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;make&amp;quot;&lt;/span&gt;
  backup 5
  cwd &lt;span class=&quot;s2&quot;&gt;&amp;quot;/opt/chef/embedded/lib/ruby/gems/1.9.1/gems/pg-0.17.1/ext&amp;quot;&lt;/span&gt;
  returns 0
  cookbook_name &lt;span class=&quot;s2&quot;&gt;&amp;quot;postgresql&amp;quot;&lt;/span&gt;
  recipe_name &lt;span class=&quot;s2&quot;&gt;&amp;quot;ruby&amp;quot;&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;end&lt;/span&gt;




&lt;span class=&quot;o&quot;&gt;================================================================================&lt;/span&gt;
Recipe Compile Error in /var/chef/cache/cookbooks/slice/recipes/default.rb
&lt;span class=&quot;o&quot;&gt;================================================================================&lt;/span&gt;


Errno::ENOENT
-------------
execute&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;make pg gem lib&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;postgresql::ruby line 107&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; had an error: Errno::ENOENT: No such file or directory - make


Cookbook Trace:
---------------
  /var/chef/cache/cookbooks/postgresql/recipes/ruby.rb:112:in &lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;rescue in rescue in from_file&lt;span class=&quot;s1&quot;&gt;&amp;#39;&lt;/span&gt;
&lt;span class=&quot;s1&quot;&gt;  /var/chef/cache/cookbooks/postgresql/recipes/ruby.rb:63:in `rescue in from_file&amp;#39;&lt;/span&gt;
  /var/chef/cache/cookbooks/postgresql/recipes/ruby.rb:24:in &lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;from_file&lt;span class=&quot;s1&quot;&gt;&amp;#39;&lt;/span&gt;
&lt;span class=&quot;s1&quot;&gt;  /var/chef/cache/cookbooks/slice/recipes/default.rb:44:in `from_file&amp;#39;&lt;/span&gt;


Relevant File Content:
----------------------
/var/chef/cache/cookbooks/postgresql/recipes/ruby.rb:

105:      lib_builder.run_action&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;:run&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
106:  
107:      &lt;span class=&quot;nv&quot;&gt;lib_maker&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; execute &lt;span class=&quot;s1&quot;&gt;&amp;#39;make pg gem lib&amp;#39;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
108:        &lt;span class=&quot;nb&quot;&gt;command&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;make&amp;#39;&lt;/span&gt;
109:        cwd ext_dir
110:        action :nothing
111:      end
112&amp;gt;&amp;gt;     lib_maker.run_action&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;:run&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
113:  
114:      &lt;span class=&quot;nv&quot;&gt;lib_installer&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; execute &lt;span class=&quot;s1&quot;&gt;&amp;#39;install pg gem lib&amp;#39;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
115:        &lt;span class=&quot;nb&quot;&gt;command&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;make install&amp;#39;&lt;/span&gt;
116:        cwd ext_dir
117:        action :nothing
118:      end
119:      lib_installer.run_action&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;:run&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
120:  
121:      &lt;span class=&quot;nv&quot;&gt;spec_installer&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; execute &lt;span class=&quot;s1&quot;&gt;&amp;#39;install pg spec&amp;#39;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;



&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;2014-06-19T13:34:35-05:00&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; ERROR: Running exception handlers
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;2014-06-19T13:34:35-05:00&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; ERROR: Exception handlers &lt;span class=&quot;nb&quot;&gt;complete&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;2014-06-19T13:34:35-05:00&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; FATAL: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out
Chef Client failed. &lt;span class=&quot;m&quot;&gt;2&lt;/span&gt; resources updated
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;2014-06-19T13:34:36-05:00&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;exit &lt;/span&gt;code 1&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;First thing I found was that the make library is part of build-essentials. So if I include that with&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;include_recipe &lt;span class=&quot;s2&quot;&gt;&amp;quot;build-essential&amp;quot;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

</description>
				<pubDate>Thu, 19 Jun 2014 07:37:00 -0600</pubDate>
				<link>http://www.mikehoffert.com/2014/06/19/chef-postgres-make/</link>
				<guid isPermaLink="true">http://www.mikehoffert.com/2014/06/19/chef-postgres-make/</guid>
			</item>
		
			<item>
				<title>Chef - Server Provisioning Software</title>
				<description>&lt;p&gt;I’m trying to run capistrano to deploy a code base. When I run capistrano, it fails to install gem pg because of the following&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;rake aborted!
DEBUG &lt;span class=&quot;o&quot;&gt;[]&lt;/span&gt; 	PG::ConnectionBad: FATAL:  no pg_hba.conf entry &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; host &lt;span class=&quot;s2&quot;&gt;&amp;quot;0.0.0.0&amp;quot;&lt;/span&gt;, user &lt;span class=&quot;s2&quot;&gt;&amp;quot;postgres&amp;quot;&lt;/span&gt;, database &lt;span class=&quot;s2&quot;&gt;&amp;quot;slice&amp;quot;&lt;/span&gt;, SSL on
DEBUG &lt;span class=&quot;o&quot;&gt;[]&lt;/span&gt; 	FATAL:  no pg_hba.conf entry &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; host &lt;span class=&quot;s2&quot;&gt;&amp;quot;0.0.0.0&amp;quot;&lt;/span&gt;, user &lt;span class=&quot;s2&quot;&gt;&amp;quot;postgres&amp;quot;&lt;/span&gt;, database &lt;span class=&quot;s2&quot;&gt;&amp;quot;slice&amp;quot;&lt;/span&gt;, SSL off
DEBUG &lt;span class=&quot;o&quot;&gt;[]&lt;/span&gt; 	/home/deploy/slice/shared/bundle/ruby/2.1.0/gems/activerecord-4.0.3/lib/active_record/connection_adapters/postgresql_adapter.rb:831:in &lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;initialize&lt;span class=&quot;s1&quot;&gt;&amp;#39;&lt;/span&gt;
&lt;span class=&quot;s1&quot;&gt;DEBUG [] 	/home/deploy/slice/shared/bundle/ruby/2.1.0/gems/activerecord-4.0.3/lib/active_record/connection_adapters/postgresql_adapter.rb:831:in `new&amp;#39;&lt;/span&gt;
DEBUG &lt;span class=&quot;o&quot;&gt;[]&lt;/span&gt; 	/home/deploy/slice/shared/bundle/ruby/2.1.0/gems/activerecord-4.0.3/lib/active_record/connection_adapters/postgresql_adapter.rb:831:in &lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;connect&lt;span class=&quot;s1&quot;&gt;&amp;#39;&lt;/span&gt;
&lt;span class=&quot;s1&quot;&gt;DEBUG [] 	/home/deploy/slice/shared/bundle/ruby/2.1.0/gems/activerecord-4.0.3/lib/active_record/connection_adapters/postgresql_adapter.rb:548:in `initialize&amp;#39;&lt;/span&gt;
DEBUG &lt;span class=&quot;o&quot;&gt;[]&lt;/span&gt; 	/home/deploy/slice/shared/bundle/ruby/2.1.0/gems/activerecord-4.0.3/lib/active_record/connection_adapters/postgresql_adapter.rb:41:in &lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;new&lt;span class=&quot;s1&quot;&gt;&amp;#39;&lt;/span&gt;
&lt;span class=&quot;s1&quot;&gt;DEBUG [] 	/home/deploy/slice/shared/bundle/ruby/2.1.0/gems/activerecord-4.0.3/lib/active_record/connection_adapters/postgresql_adapter.rb:41:in `postgresql_connection&amp;#39;&lt;/span&gt;
DEBUG &lt;span class=&quot;o&quot;&gt;[]&lt;/span&gt; 	/home/deploy/slice/shared/bundle/ruby/2.1.0/gems/activerecord-4.0.3/lib/active_record/connection_adapters/abstract/connection_pool.rb:440:in &lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;new_connection&lt;span class=&quot;s1&quot;&gt;&amp;#39;&lt;/span&gt;
&lt;span class=&quot;s1&quot;&gt;DEBUG [] 	/home/deploy/slice/shared/bundle/ruby/2.1.0/gems/activerecord-4.0.3/lib/active_record/connection_adapters/abstract/connection_pool.rb:450:in `checkout_new_connection&amp;#39;&lt;/span&gt;
DEBUG &lt;span class=&quot;o&quot;&gt;[]&lt;/span&gt; 	/home/deploy/slice/shared/bundle/ruby/2.1.0/gems/activerecord-4.0.3/lib/active_record/connection_adapters/abstract/connection_pool.rb:421:in &lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;acquire_connection&lt;span class=&quot;s1&quot;&gt;&amp;#39;&lt;/span&gt;
&lt;span class=&quot;s1&quot;&gt;DEBUG [] 	/home/deploy/slice/shared/bundle/ruby/2.1.0/gems/activerecord-4.0.3/lib/active_record/connection_adapters/abstract/connection_pool.rb:356:in `block in checkout&amp;#39;&lt;/span&gt;
DEBUG &lt;span class=&quot;o&quot;&gt;[]&lt;/span&gt; 	/home/deploy/slice/shared/bundle/ruby/2.1.0/gems/activerecord-4.0.3/lib/active_record/connection_adapters/abstract/connection_pool.rb:355:in &lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;checkout&lt;span class=&quot;s1&quot;&gt;&amp;#39;&lt;/span&gt;
&lt;span class=&quot;s1&quot;&gt;DEBUG [] 	/home/deploy/slice/shared/bundle/ruby/2.1.0/gems/activerecord-4.0.3/lib/active_record/connection_adapters/abstract/connection_pool.rb:265:in `block in connection&amp;#39;&lt;/span&gt;
DEBUG &lt;span class=&quot;o&quot;&gt;[]&lt;/span&gt; 	/home/deploy/slice/shared/bundle/ruby/2.1.0/gems/activerecord-4.0.3/lib/active_record/connection_adapters/abstract/connection_pool.rb:264:in &lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;connection&lt;span class=&quot;s1&quot;&gt;&amp;#39;&lt;/span&gt;
&lt;span class=&quot;s1&quot;&gt;DEBUG [] 	/home/deploy/slice/shared/bundle/ruby/2.1.0/gems/activerecord-4.0.3/lib/active_record/connection_adapters/abstract/connection_pool.rb:546:in `retrieve_connection&amp;#39;&lt;/span&gt;
DEBUG &lt;span class=&quot;o&quot;&gt;[]&lt;/span&gt; 	/home/deploy/slice/shared/bundle/ruby/2.1.0/gems/activerecord-4.0.3/lib/active_record/connection_handling.rb:79:in &lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;retrieve_connection&lt;span class=&quot;s1&quot;&gt;&amp;#39;&lt;/span&gt;
&lt;span class=&quot;s1&quot;&gt;DEBUG [] 	/home/deploy/slice/shared/bundle/ruby/2.1.0/gems/activerecord-4.0.3/lib/active_record/connection_handling.rb:53:in `connection&amp;#39;&lt;/span&gt;
DEBUG &lt;span class=&quot;o&quot;&gt;[]&lt;/span&gt; 	/home/deploy/slice/shared/bundle/ruby/2.1.0/gems/activerecord-4.0.3/lib/active_record/migration.rb:863:in &lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;initialize&lt;span class=&quot;s1&quot;&gt;&amp;#39;&lt;/span&gt;
&lt;span class=&quot;s1&quot;&gt;DEBUG [] 	/home/deploy/slice/shared/bundle/ruby/2.1.0/gems/activerecord-4.0.3/lib/active_record/migration.rb:764:in `new&amp;#39;&lt;/span&gt;
DEBUG &lt;span class=&quot;o&quot;&gt;[]&lt;/span&gt; 	/home/deploy/slice/shared/bundle/ruby/2.1.0/gems/activerecord-4.0.3/lib/active_record/migration.rb:764:in &lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;up&lt;span class=&quot;s1&quot;&gt;&amp;#39;&lt;/span&gt;
&lt;span class=&quot;s1&quot;&gt;DEBUG [] 	/home/deploy/slice/shared/bundle/ruby/2.1.0/gems/activerecord-4.0.3/lib/active_record/migration.rb:742:in `migrate&amp;#39;&lt;/span&gt;
DEBUG &lt;span class=&quot;o&quot;&gt;[]&lt;/span&gt; 	/home/deploy/slice/shared/bundle/ruby/2.1.0/gems/activerecord-4.0.3/lib/active_record/railties/databases.rake:42:in &lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;block &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;2&lt;/span&gt; levels&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; in &amp;lt;top &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;required&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;&amp;gt;&lt;span class=&quot;err&quot;&gt;&amp;#39;&lt;/span&gt;
DEBUG &lt;span class=&quot;o&quot;&gt;[]&lt;/span&gt; 	Tasks: &lt;span class=&quot;nv&quot;&gt;TOP&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&amp;gt; db:migrate
DEBUG &lt;span class=&quot;o&quot;&gt;[]&lt;/span&gt; 	&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;See full trace by running task with --trace&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
cap aborted!
SSHKit::Command::Failed: rake &lt;span class=&quot;nb&quot;&gt;exit &lt;/span&gt;status: 1
rake stdout: Nothing written
rake stderr: rake aborted!
PG::ConnectionBad: FATAL:  no pg_hba.conf entry &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; host &lt;span class=&quot;s2&quot;&gt;&amp;quot;0.0.0.0&amp;quot;&lt;/span&gt;, user &lt;span class=&quot;s2&quot;&gt;&amp;quot;postgres&amp;quot;&lt;/span&gt;, database &lt;span class=&quot;s2&quot;&gt;&amp;quot;slice&amp;quot;&lt;/span&gt;, SSL on
FATAL:  no pg_hba.conf entry &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; host &lt;span class=&quot;s2&quot;&gt;&amp;quot;0.0.0.0&amp;quot;&lt;/span&gt;, user &lt;span class=&quot;s2&quot;&gt;&amp;quot;postgres&amp;quot;&lt;/span&gt;, database &lt;span class=&quot;s2&quot;&gt;&amp;quot;slice&amp;quot;&lt;/span&gt;, SSL off&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;The pg_hba.conf file is generated when pg is is installed. The only problem is that I don’t want postgres installed on that server. I want the application to communicate with another server that hosts the postgres database so that I can have multiple application servers accessing the same database. So, since I’m not installing postgres, the config file is not being created. I could run &lt;code&gt;gem install pg --without-pg_config&lt;/code&gt;, but then I wouldn’t be able to run capistrano. The &lt;a href=&quot;http://www.postgresql.org/docs/8.3/static/auth-pg-hba-conf.html&quot;&gt;pg_hba&lt;/a&gt; file is described as a configuration file for client authentication. At first I thought this file needed to be created on the application side, but the application side actually is looking for this file on the postgres server. So, this file needs to be on the postgres server at /etc/postgresql/VERSION/main/pg_hba.conf&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;c1&quot;&gt;# PostgreSQL Client Authentication Configuration File&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# ===================================================&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# Refer to the &amp;quot;Client Authentication&amp;quot; section in the PostgreSQL&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# documentation for a complete description of this file.  A short&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# synopsis follows.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# This file controls: which hosts are allowed to connect, how clients&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# are authenticated, which PostgreSQL user names they can use, which&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# databases they can access.  Records take one of these forms:&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# local      DATABASE  USER  METHOD  [OPTIONS]&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# host       DATABASE  USER  ADDRESS  METHOD  [OPTIONS]&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# hostssl    DATABASE  USER  ADDRESS  METHOD  [OPTIONS]&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# hostnossl  DATABASE  USER  ADDRESS  METHOD  [OPTIONS]&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# (The uppercase items must be replaced by actual values.)&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# The first field is the connection type: &amp;quot;local&amp;quot; is a Unix-domain&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# socket, &amp;quot;host&amp;quot; is either a plain or SSL-encrypted TCP/IP socket,&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# &amp;quot;hostssl&amp;quot; is an SSL-encrypted TCP/IP socket, and &amp;quot;hostnossl&amp;quot; is a&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# plain TCP/IP socket.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# DATABASE can be &amp;quot;all&amp;quot;, &amp;quot;sameuser&amp;quot;, &amp;quot;samerole&amp;quot;, &amp;quot;replication&amp;quot;, a&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# database name, or a comma-separated list thereof. The &amp;quot;all&amp;quot;&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# keyword does not match &amp;quot;replication&amp;quot;. Access to replication&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# must be enabled in a separate record (see example below).&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# USER can be &amp;quot;all&amp;quot;, a user name, a group name prefixed with &amp;quot;+&amp;quot;, or a&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# comma-separated list thereof.  In both the DATABASE and USER fields&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# you can also write a file name prefixed with &amp;quot;@&amp;quot; to include names&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# from a separate file.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# ADDRESS specifies the set of hosts the record matches.  It can be a&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# host name, or it is made up of an IP address and a CIDR mask that is&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# an integer (between 0 and 32 (IPv4) or 128 (IPv6) inclusive) that&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# specifies the number of significant bits in the mask.  A host name&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# that starts with a dot (.) matches a suffix of the actual host name.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# Alternatively, you can write an IP address and netmask in separate&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# columns to specify the set of hosts.  Instead of a CIDR-address, you&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# can write &amp;quot;samehost&amp;quot; to match any of the server&amp;#39;s own IP addresses,&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# or &amp;quot;samenet&amp;quot; to match any address in any subnet that the server is&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# directly connected to.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# METHOD can be &amp;quot;trust&amp;quot;, &amp;quot;reject&amp;quot;, &amp;quot;md5&amp;quot;, &amp;quot;password&amp;quot;, &amp;quot;gss&amp;quot;, &amp;quot;sspi&amp;quot;,&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# &amp;quot;krb5&amp;quot;, &amp;quot;ident&amp;quot;, &amp;quot;peer&amp;quot;, &amp;quot;pam&amp;quot;, &amp;quot;ldap&amp;quot;, &amp;quot;radius&amp;quot; or &amp;quot;cert&amp;quot;.  Note that&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# &amp;quot;password&amp;quot; sends passwords in clear text; &amp;quot;md5&amp;quot; is preferred since&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# it sends encrypted passwords.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# OPTIONS are a set of options for the authentication in the format&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# NAME=VALUE.  The available options depend on the different&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# authentication methods -- refer to the &amp;quot;Client Authentication&amp;quot;&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# section in the documentation for a list of which options are&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# available for which authentication methods.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# Database and user names containing spaces, commas, quotes and other&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# special characters must be quoted.  Quoting one of the keywords&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# &amp;quot;all&amp;quot;, &amp;quot;sameuser&amp;quot;, &amp;quot;samerole&amp;quot; or &amp;quot;replication&amp;quot; makes the name lose&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# its special character, and just match a database or username with&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# that name.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# This file is read on server startup and when the postmaster receives&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# a SIGHUP signal.  If you edit the file on a running system, you have&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# to SIGHUP the postmaster for the changes to take effect.  You can&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# use &amp;quot;pg_ctl reload&amp;quot; to do that.&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# Put your actual configuration here&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# ----------------------------------&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# If you want to allow non-local connections, you need to add more&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# &amp;quot;host&amp;quot; records.  In that case you will also need to make PostgreSQL&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# listen on a non-local interface via the listen_addresses&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# configuration parameter, or via the -i or -h command line switches.&lt;/span&gt;




&lt;span class=&quot;c1&quot;&gt;# DO NOT DISABLE!&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# If you change this first entry you will need to make sure that the&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# database superuser can access the database using some other method.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# Noninteractive access to all databases is required during automatic&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# maintenance (custom daily cronjobs, replication, and similar tasks).&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# Database administrative login by Unix domain socket&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;local&lt;/span&gt;   &lt;span class=&quot;n&quot;&gt;all&lt;/span&gt;             &lt;span class=&quot;n&quot;&gt;postgres&lt;/span&gt;                                &lt;span class=&quot;n&quot;&gt;peer&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# TYPE  DATABASE        USER            ADDRESS                 METHOD&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# &amp;quot;local&amp;quot; is for Unix domain socket connections only&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;local&lt;/span&gt;   &lt;span class=&quot;n&quot;&gt;all&lt;/span&gt;             &lt;span class=&quot;n&quot;&gt;all&lt;/span&gt;                                     &lt;span class=&quot;n&quot;&gt;peer&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# IPv4 local connections:&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;host&lt;/span&gt;    &lt;span class=&quot;n&quot;&gt;all&lt;/span&gt;             &lt;span class=&quot;n&quot;&gt;all&lt;/span&gt;             &lt;span class=&quot;no&quot;&gt;APPLICATION_IP&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;32&lt;/span&gt;            &lt;span class=&quot;n&quot;&gt;md5&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# IPv6 local connections:&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;host&lt;/span&gt;    &lt;span class=&quot;n&quot;&gt;all&lt;/span&gt;             &lt;span class=&quot;n&quot;&gt;all&lt;/span&gt;             &lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;128&lt;/span&gt;                 &lt;span class=&quot;n&quot;&gt;md5&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# Allow replication connections from localhost, by a user with the&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# replication privilege.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#local   replication     postgres                                peer&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#host    replication     postgres        127.0.0.1/32            md5&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#host    replication     postgres        ::1/128                 md5&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;The important line is the APPLICATION_IP that tells your postgres server where it will accept traffic from. Most of the other lines are just comments. &lt;a href=&quot;http://stackoverflow.com/questions/1406025/no-pg-hba-conf-entry-for-host&quot;&gt;Here&lt;/a&gt; is another for customizing that configuration file.&lt;/p&gt;

</description>
				<pubDate>Tue, 17 Jun 2014 08:37:00 -0600</pubDate>
				<link>http://www.mikehoffert.com/2014/06/17/postges-config/</link>
				<guid isPermaLink="true">http://www.mikehoffert.com/2014/06/17/postges-config/</guid>
			</item>
		
			<item>
				<title>Chef - Server Provisioning Software</title>
				<description>&lt;p&gt;So, I got to the point where I wanted a clean slate so I reformatted and started my mac over with a clean install.
I’m setting up things that I haven’t configured in a long time.
It’s good for my memory though.&lt;/p&gt;

&lt;p&gt;Problem #1
I’m running&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;bundle install&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;on ruby version 1.9.2 for a chef repository. It seems to have a problem installing the nokogiri gem. &lt;a href=&quot;https://github.com/sparklemotion/nokogiri&quot;&gt;Nokogiri&lt;/a&gt; is a HTML, XML, SAX, and Reader parser.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;bundle install
Fetching gem metadata from https://rubygems.org/.......
Fetching additional metadata from https://rubygems.org/..
Using rake 10.3.1
Using builder 3.2.2
Using gyoku 1.1.1
Using mini_portile 0.5.3
sh: -c: line 0: unexpected EOF &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; looking &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; matching &lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;&amp;#39;&lt;/span&gt;
&lt;span class=&quot;s2&quot;&gt;sh: -c: line 1: syntax error: unexpected end of file&lt;/span&gt;

&lt;span class=&quot;s2&quot;&gt;Gem::Ext::BuildError: ERROR: Failed to build gem native extension.&lt;/span&gt;

&lt;span class=&quot;s2&quot;&gt;    /Users/mahcloud/.rvm/rubies/ruby-1.9.2-p320/bin/ruby extconf.rb &amp;quot;&lt;/span&gt;--with-xml2-include&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/usr/local/Cellar/libxml2/2.7.8/include/libxml2 --with-xml2-lib&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/usr/local/Cellar/libxml2/2.7.8/lib --with-xslt-dir&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/usr/local/Cellar

extconf failed, &lt;span class=&quot;nb&quot;&gt;exit &lt;/span&gt;code 2

Gem files will remain installed in /Users/mahcloud/.rvm/gems/ruby-1.9.2-p320@1kb-chef/gems/nokogiri-1.6.2 &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; inspection.
Results logged to /Users/mahcloud/.rvm/gems/ruby-1.9.2-p320@1kb-chef/extensions/x86_64-darwin-13/1.9.1/nokogiri-1.6.2/gem_make.out
An error occurred &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; installing nokogiri &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;1.6.2&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;, and Bundler cannot &lt;span class=&quot;k&quot;&gt;continue&lt;/span&gt;.
Make sure that &lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;gem install nokogiri -v &lt;span class=&quot;s1&quot;&gt;&amp;#39;1.6.2&amp;#39;&lt;/span&gt;&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt; succeeds before bundling.&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;I take the advice and run &lt;code&gt;gem install nokogiri -v &#39;1.6.2&#39;&lt;/code&gt; which fails because it can’t find the libiconv native library.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;gem install nokogiri -v &lt;span class=&quot;s1&quot;&gt;&amp;#39;1.6.2&amp;#39;&lt;/span&gt;
Building native extensions.  This could take a &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt;...
Building nokogiri using packaged libraries.
ERROR:  Error installing nokogiri:
	ERROR: Failed to build gem native extension.

    /Users/mahcloud/.rvm/rubies/ruby-1.9.2-p320/bin/ruby extconf.rb
Building nokogiri using packaged libraries.
-----
libiconv is missing.  please visit http://nokogiri.org/tutorials/installing_nokogiri.html &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;help &lt;/span&gt;with installing dependencies.
-----
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; more
details.  You may need configuration options.

Provided configuration options:
	--with-opt-dir
	--with-opt-include
	--without-opt-include&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;opt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;-dir&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;/include
	--with-opt-lib
	--without-opt-lib&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;opt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;-dir&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;/lib
	--with-make-prog
	--without-make-prog
	--srcdir&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;.
	--curdir
	--ruby&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/Users/mahcloud/.rvm/rubies/ruby-1.9.2-p320/bin/ruby
	--help
	--clean
	--use-system-libraries
	--enable-static
	--disable-static
	--with-zlib-dir
	--without-zlib-dir
	--with-zlib-include
	--without-zlib-include&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;zlib&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;-dir&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;/include
	--with-zlib-lib
	--without-zlib-lib&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;zlib&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;-dir&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;/lib
	--enable-cross-build
	--disable-cross-build

extconf failed, &lt;span class=&quot;nb&quot;&gt;exit &lt;/span&gt;code 1

Gem files will remain installed in /Users/mahcloud/.rvm/gems/ruby-1.9.2-p320@1kb-chef/gems/nokogiri-1.6.2 &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; inspection.
Results logged to /Users/mahcloud/.rvm/gems/ruby-1.9.2-p320@1kb-chef/extensions/x86_64-darwin-13/1.9.1/nokogiri-1.6.2/gem_make.out&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;a href=&quot;https://www.gnu.org/software/libiconv/&quot;&gt;libiconv&lt;/a&gt; is a library that converts string encodings from or to unicode. libiconv comes standard on my mac, but for some reason nokogiri thinks it is missing.&lt;/p&gt;

&lt;p&gt;So we need install libiconv again and tell nokogiri where libiconv is. Some options for installing libiconv are macports and brew. I installed with brew. And then ran.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;gem install nokogiri -- --with-iconv-dir&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/usr/local/Cellar/libiconv/1.14/&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;This installed successfully. This fixed the problem in my development environment for my site, but for the chef repository, it still doesn’t recognize that nokogiri is installed.&lt;/p&gt;

&lt;p&gt;Next, I ran&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;xcode-select --install&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;This installs the command-line developer tools for mac, which includes libiconv. Install nokogiri version as normal and that took care of the problem.&lt;/p&gt;

</description>
				<pubDate>Tue, 17 Jun 2014 06:17:00 -0600</pubDate>
				<link>http://www.mikehoffert.com/2014/06/17/chef-bundle-install/</link>
				<guid isPermaLink="true">http://www.mikehoffert.com/2014/06/17/chef-bundle-install/</guid>
			</item>
		
			<item>
				<title>Chef - Server Provisioning Software</title>
				<description>&lt;p&gt;Okay, today I’m wearing my chef loves bacon hat. Today’s goal is to get started with Chef for provisioning load balanced API servers.&lt;/p&gt;

&lt;p&gt;I’ll be starting out on a &lt;a href=&quot;http://railscasts.com/episodes/339-chef-solo-basics&quot;&gt;railscast&lt;/a&gt; video. Well this video is on chef-solo and I’ll be using chef server, so not as much help as I was hoping. Next I went through this &lt;a href=&quot;http://gettingstartedwithchef.com/&quot;&gt;tutorial&lt;/a&gt;, but it just flat out didn’t work, so I stopped half way through. My boss suggested this &lt;a href=&quot;https://learnchef.opscode.com/screencasts/spring-fundamentals/week-1/&quot;&gt;video series&lt;/a&gt;, but it is beyond boring and overly complex. We’ll be using &lt;a href=&quot;http://www.getchef.com/&quot;&gt;opscode&lt;/a&gt; to host our chef server.&lt;/p&gt;

</description>
				<pubDate>Wed, 11 Jun 2014 01:41:00 -0600</pubDate>
				<link>http://www.mikehoffert.com/2014/06/11/chef-server-provisioning/</link>
				<guid isPermaLink="true">http://www.mikehoffert.com/2014/06/11/chef-server-provisioning/</guid>
			</item>
		
			<item>
				<title>Ruby God - Process Management</title>
				<description>&lt;p&gt;So I’m back after a few months.&lt;/p&gt;

&lt;p&gt;The project I was working on that needed a custom install was not received well. Originally everyone liked it but when customers that didn’t understand it started to complain, management just wanted it shutdown. Bad data is better than no data at all I guess.&lt;/p&gt;

&lt;p&gt;Well, I’m back and onto a new project that needs rails deployment. This time it is a reporting tools. In order to not slow down the live orders/quotes table with reporting, I’m building a seperate database of order/quote data that should be populated identical to the live database. I’m using &lt;a href=&quot;http://www.rabbitmq.com/&quot;&gt;rabbitMQ&lt;/a&gt; to transfer a hash of the data when an order or quote is changed. This way it doesn’t slow down the transaction or database on the live site. The hash is put in a queue by the rabbit exchange. Our reporting application will then consume that data and save the calculations to a postgres database.&lt;/p&gt;

&lt;p&gt;Now that we have all the background story covered, I’ve got the RoR application deploying live and to a beta staging environment. When I deploy to these boxes, I need a zero downtime switch to the new code. Since the reporting server is constantly consuming data from rabbitMQ, it would be very bad if it missed any of these queued items. I’ll be using &lt;a href=&quot;http://godrb.com/&quot;&gt;god&lt;/a&gt; to keep the rabbitMQ listener up and running even during a code deployment. So, the line I need to add to my capistrano deployment is:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;sudo /var/god/.rvm/bin/god restart APP-NAME&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;I’m having a little problem here.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;Command: /usr/bin/env sudo
DEBUG &lt;span class=&quot;o&quot;&gt;[]&lt;/span&gt; 	usage: sudo -h &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; -K &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; -k &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; -V
DEBUG &lt;span class=&quot;o&quot;&gt;[]&lt;/span&gt; 	usage: sudo -v &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;-g group&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;-h host&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;-p prompt&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;-u user&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;
DEBUG &lt;span class=&quot;o&quot;&gt;[]&lt;/span&gt; 	usage: sudo -l &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;-g group&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;-h host&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;-p prompt&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;-U user&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;-u user&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;
DEBUG &lt;span class=&quot;o&quot;&gt;[]&lt;/span&gt; 	  
DEBUG &lt;span class=&quot;o&quot;&gt;[]&lt;/span&gt; 	          &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;command&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;
DEBUG &lt;span class=&quot;o&quot;&gt;[]&lt;/span&gt; 	usage: sudo &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;-r role&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;-t &lt;span class=&quot;nb&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;-C num&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;-g group&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;-h host&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;-p
DEBUG &lt;span class=&quot;o&quot;&gt;[]&lt;/span&gt; 	  
DEBUG &lt;span class=&quot;o&quot;&gt;[]&lt;/span&gt; 	          prompt&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;-u user&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;VAR&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;value&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;-i&lt;span class=&quot;p&quot;&gt;|&lt;/span&gt;-s&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&amp;lt;&lt;span class=&quot;nb&quot;&gt;command&lt;/span&gt;&amp;gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;
DEBUG &lt;span class=&quot;o&quot;&gt;[]&lt;/span&gt; 	usage: sudo -e &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;-r role&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;-t &lt;span class=&quot;nb&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;-C num&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;-g group&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;-h host&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;-p
DEBUG &lt;span class=&quot;o&quot;&gt;[]&lt;/span&gt; 	    
DEBUG &lt;span class=&quot;o&quot;&gt;[]&lt;/span&gt; 	        prompt&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;-u user&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; file ...
cap aborted!
SSHKit::Command::Failed: sudo &lt;span class=&quot;nb&quot;&gt;exit &lt;/span&gt;status: 1
sudo stdout: Nothing written
sudo stderr: usage: sudo -h &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; -K &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; -k &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; -V
/gems/sshkit-1.4.0/lib/sshkit/command.rb:98:in &lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;exit_status&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;#39;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;First thought, this exact script does work on the server by manually entering it.&lt;/p&gt;

&lt;p&gt;Next, what is &lt;a href=&quot;https://github.com/capistrano/sshkit&quot;&gt;SSHKit&lt;/a&gt;?
It is a gem capistrano uses to make ssh connections to all the different environments I will be deploying to.&lt;/p&gt;

&lt;p&gt;Exit status 1 just means there was an error with no more explanation than that.
So, I’m a little stuck here. Bash doesn’t give any specific error code. I would guess it has something to do using sudo without a password on an ssh connection using an ssh-key for authentication. I asked my boss if he had any suggestions. He said &lt;code&gt;does the deploy user have password-less sudo rights?&lt;/code&gt;. It looks like there is something called pty and tty. So what are they and what’s the difference?
I found &lt;a href=&quot;http://ubuntuforums.org/archive/index.php/t-833765.html&quot;&gt;TTY and PTY&lt;/a&gt; and &lt;a href=&quot;http://stackoverflow.com/questions/4426280/what-do-pty-and-tty-mean&quot;&gt;Teletype&lt;/a&gt;. Still very confused why I would need a virtual terminal for deploying and if I capistrano needs a virtual terminal to run commands how it did anything with out it. Maybe it was already using one and I can just set it to a different one.&lt;/p&gt;

&lt;p&gt;Okay, so I still feel lost enough not to know where to go. Since, pty doesn’t sound harmful at all, I guess I will just turn it on and see what happens.&lt;/p&gt;

&lt;p&gt;Turning on pty with &lt;code&gt;set :pty, true&lt;/code&gt; or &lt;code&gt;set :tty, true&lt;/code&gt; in config/deploy.rb file gave the same results.&lt;/p&gt;

&lt;p&gt;Okay, I think was on the wrong track with the pty thing. I had to add my user as a &lt;a href=&quot;http://askubuntu.com/questions/192050/how-to-run-sudo-command-with-no-password&quot;&gt;passwordless sudo&lt;/a&gt; user for deploying. That took care of the problem.&lt;/p&gt;

</description>
				<pubDate>Tue, 10 Jun 2014 03:25:00 -0600</pubDate>
				<link>http://www.mikehoffert.com/2014/06/10/rails-god-process-management/</link>
				<guid isPermaLink="true">http://www.mikehoffert.com/2014/06/10/rails-god-process-management/</guid>
			</item>
		
			<item>
				<title>First rails deploy</title>
				<description>&lt;p&gt;I’ve been working on learning how to deploy a rails app without the help of &lt;a href=&quot;https://www.heroku.com&quot;&gt;Heroku&lt;/a&gt;.
You might ask why I would want to do that.
That’s a really good question that I ask myself everytime I can’t figure things out for hours on end.
I won’t answer that question now.
I’ll leave that for the last post I make on RailsDeploy.&lt;/p&gt;

&lt;p&gt;My teacher is the author of &lt;a href=&quot;https://railsdeploymentbook.com/&quot;&gt;Fearless Rails Deployment&lt;/a&gt;.
If you preorder his book, he’ll let you view the draft so far.
I don’t want to give away anything that is in his book, so I’m just gonna skim over what I’ve learned.&lt;/p&gt;

&lt;p&gt;I deployed using capistrano.
This will create the capistrano files:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;cap install&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;To use capistrano you’ll need to be able to ssh authenticate with ssh key instead of password.
&lt;a href=&quot;http://gorails.com/deploy/ubuntu/12.04&quot;&gt;Here&lt;/a&gt; is a great tutorial on how to do that.&lt;/p&gt;

&lt;p&gt;First, I needed to install unicorn as my rails server.
This part was a lot easier than I thought it was going to be.
After adding the gem and installing it, I just made a unicorn config file and ran unicorn.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;vim /etc/unicorn/mahcloud.rb&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;pid&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;/home/root/mahcloud/tmp/unicorn.pid&amp;#39;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;working_directory&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;/home/root/mahcloud/&amp;#39;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;The config file has a little more to it than that.&lt;/p&gt;

</description>
				<pubDate>Wed, 09 Apr 2014 12:25:00 -0600</pubDate>
				<link>http://www.mikehoffert.com/2014/04/09/rails-app-deploy/</link>
				<guid isPermaLink="true">http://www.mikehoffert.com/2014/04/09/rails-app-deploy/</guid>
			</item>
		
			<item>
				<title>Javascript Canvas Game Pokemon</title>
				<description>&lt;p&gt;Wouldn’t it be more fun if we were dealing with Pokemon instead of an Ogre?&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://github.com/mahcloud/SimpleCanvasGame/blob/master/images/pokemon/1.png?raw=true&quot; alt=&quot;Background Image&quot; /&gt;
&lt;img src=&quot;https://github.com/mahcloud/SimpleCanvasGame/blob/master/images/pokemon/2.png?raw=true&quot; alt=&quot;Background Image&quot; /&gt;
&lt;img src=&quot;https://github.com/mahcloud/SimpleCanvasGame/blob/master/images/pokemon/3.png?raw=true&quot; alt=&quot;Background Image&quot; /&gt;
&lt;img src=&quot;https://github.com/mahcloud/SimpleCanvasGame/blob/master/images/pokemon/4.png?raw=true&quot; alt=&quot;Background Image&quot; /&gt;
&lt;img src=&quot;https://github.com/mahcloud/SimpleCanvasGame/blob/master/images/pokemon/5.png?raw=true&quot; alt=&quot;Background Image&quot; /&gt;
&lt;img src=&quot;https://github.com/mahcloud/SimpleCanvasGame/blob/master/images/pokemon/6.png?raw=true&quot; alt=&quot;Background Image&quot; /&gt;
&lt;img src=&quot;https://github.com/mahcloud/SimpleCanvasGame/blob/master/images/pokemon/7.png?raw=true&quot; alt=&quot;Background Image&quot; /&gt;
&lt;img src=&quot;https://github.com/mahcloud/SimpleCanvasGame/blob/master/images/pokemon/8.png?raw=true&quot; alt=&quot;Background Image&quot; /&gt;
&lt;img src=&quot;https://github.com/mahcloud/SimpleCanvasGame/blob/master/images/pokemon/9.png?raw=true&quot; alt=&quot;Background Image&quot; /&gt;
&lt;img src=&quot;https://github.com/mahcloud/SimpleCanvasGame/blob/master/images/pokemon/10.png?raw=true&quot; alt=&quot;Background Image&quot; /&gt;
&lt;img src=&quot;https://github.com/mahcloud/SimpleCanvasGame/blob/master/images/pokemon/11.png?raw=true&quot; alt=&quot;Background Image&quot; /&gt;
&lt;img src=&quot;https://github.com/mahcloud/SimpleCanvasGame/blob/master/images/pokemon/12.png?raw=true&quot; alt=&quot;Background Image&quot; /&gt;
&lt;img src=&quot;https://github.com/mahcloud/SimpleCanvasGame/blob/master/images/pokemon/13.png?raw=true&quot; alt=&quot;Background Image&quot; /&gt;
&lt;img src=&quot;https://github.com/mahcloud/SimpleCanvasGame/blob/master/images/pokemon/14.png?raw=true&quot; alt=&quot;Background Image&quot; /&gt;
&lt;img src=&quot;https://github.com/mahcloud/SimpleCanvasGame/blob/master/images/pokemon/15.png?raw=true&quot; alt=&quot;Background Image&quot; /&gt;
&lt;img src=&quot;https://github.com/mahcloud/SimpleCanvasGame/blob/master/images/pokemon/16.png?raw=true&quot; alt=&quot;Background Image&quot; /&gt;
&lt;img src=&quot;https://github.com/mahcloud/SimpleCanvasGame/blob/master/images/pokemon/17.png?raw=true&quot; alt=&quot;Background Image&quot; /&gt;
&lt;img src=&quot;https://github.com/mahcloud/SimpleCanvasGame/blob/master/images/pokemon/18.png?raw=true&quot; alt=&quot;Background Image&quot; /&gt;&lt;/p&gt;

&lt;p&gt;These are the image dimensions for the pokemon.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;pokemon_dimensions&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;27&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;32&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;27&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;32&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;29&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;32&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;27&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;32&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;21&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;32&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;32&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;24&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;31&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;32&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;32&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;30&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;30&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;32&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;27&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;32&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;26&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;32&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;28&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;32&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;30&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;32&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;32&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;24&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;32&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;30&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;24&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;32&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;32&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;26&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;18&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;32&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Add this to your spawnMonster function.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;nx&quot;&gt;pokemon&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;floor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;random&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;18&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;monsterImage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;src&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;images/pokemon/&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;pokemon&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;.png&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;monster&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;width&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;pokemon_dimensions&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;pokemon&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;monster&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;height&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;pokemon_dimensions&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;pokemon&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Let’s rename some methods.
monstersSlain should be pokemonCaught.
slayMonster should be catchPokemon.&lt;/p&gt;

&lt;p&gt;You can &lt;a href=&quot;https://github.com/mahcloud/SimpleCanvasGame/tree/add-hero&quot;&gt;download&lt;/a&gt; this example.&lt;/p&gt;

</description>
				<pubDate>Tue, 18 Mar 2014 04:45:00 -0600</pubDate>
				<link>http://www.mikehoffert.com/2014/03/18/javascript-canvas-game-pokemon/</link>
				<guid isPermaLink="true">http://www.mikehoffert.com/2014/03/18/javascript-canvas-game-pokemon/</guid>
			</item>
		
	</channel>
</rss>

			</div>

		</div>

		<footer id="footer">
			<p class="copyright">Copyright &copy; 2015 Mike Hoffert. Powered by <a href="http://jekyllrb.com">Jekyll</a>, theme by <a href="http://www.webmaster-source.com">Matt Harzewski</a></p>
		</footer>

		<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
		<script src="/assets/js/jquery.mobilemenu.min.js"></script>

		<script>
			$(document).ready(function(){
				$('#sidebar nav ul').mobileMenu({'topOptionText': 'Menu', 'prependTo': '#sidebar nav'});
			});
		</script>
	</body>
</html>